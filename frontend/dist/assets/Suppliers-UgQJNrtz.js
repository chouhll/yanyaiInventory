import{_ as K,r as f,o as J,d as R,h as e,w as t,i as n,G as _,E as i,v as L,j as V,s as O,x as E,m as r,t as g,e as S,C as Q}from"./index-_DMjZfO8.js";const W={class:"suppliers-page"},X={class:"card-header"},Y={key:1},Z={__name:"Suppliers",setup(ee){const N=f([]),k=f(!1),v=f(!1),b=f(!1),C=f(!1),o=f({name:"",contactPerson:"",phone:"",address:"",email:"",companyName:"",taxNumber:"",companyAddress:"",bankName:"",bankAccount:"",creditRating:"",paymentMethod:"",paymentTermDays:0,remarks:"",active:!0}),y=async()=>{k.value=!0;try{N.value=await _.getAll()}catch{i.error("加载供应商列表失败")}finally{k.value=!1}},T=u=>({A:"success",B:"",C:"warning",D:"danger"})[u]||"info",B=u=>{b.value=!0,o.value={...u},v.value=!0},M=async()=>{var u,l;if(!o.value.name){i.warning("请输入供应商名称");return}C.value=!0;try{b.value?(await _.update(o.value.id,o.value),i.success("更新成功")):(await _.create(o.value),i.success("创建成功")),v.value=!1,y(),$()}catch(w){i.error(((l=(u=w.response)==null?void 0:u.data)==null?void 0:l.message)||"操作失败")}finally{C.value=!1}},P=async u=>{try{await _.toggleStatus(u.id,!u.active),i.success(u.active?"已禁用":"已启用"),y()}catch{i.error("操作失败")}},h=async u=>{try{await Q.confirm("确定要删除该供应商吗？","提示",{type:"warning"}),await _.delete(u.id),i.success("删除成功"),y()}catch(l){l!=="cancel"&&i.error("删除失败")}},$=()=>{o.value={name:"",contactPerson:"",phone:"",address:"",email:"",companyName:"",taxNumber:"",companyAddress:"",bankName:"",bankAccount:"",creditRating:"",paymentMethod:"",paymentTermDays:0,remarks:"",active:!0},b.value=!1};return J(()=>{y()}),(u,l)=>{const w=n("Plus"),z=n("el-icon"),c=n("el-button"),m=n("el-table-column"),A=n("el-tag"),I=n("el-table"),F=n("el-card"),x=n("el-divider"),s=n("el-input"),d=n("el-form-item"),p=n("el-option"),U=n("el-select"),H=n("el-input-number"),j=n("el-form"),q=n("el-dialog"),G=L("loading");return V(),R("div",W,[e(F,{shadow:"hover"},{header:t(()=>[S("div",X,[l[18]||(l[18]=S("span",{style:{"font-size":"18px","font-weight":"600"}},"供应商管理",-1)),e(c,{type:"primary",onClick:l[0]||(l[0]=a=>v.value=!0)},{default:t(()=>[e(z,null,{default:t(()=>[e(w)]),_:1}),l[17]||(l[17]=r(" 新增供应商 ",-1))]),_:1})])]),default:t(()=>[O((V(),E(I,{data:N.value,border:"",style:{width:"100%"}},{default:t(()=>[e(m,{prop:"id",label:"ID",width:"80"}),e(m,{prop:"name",label:"供应商名称","min-width":"150"}),e(m,{prop:"contactPerson",label:"联系人",width:"120"}),e(m,{prop:"phone",label:"联系电话",width:"130"}),e(m,{prop:"taxNumber",label:"税号","min-width":"180"}),e(m,{prop:"creditRating",label:"信用等级",width:"100",align:"center"},{default:t(({row:a})=>[a.creditRating?(V(),E(A,{key:0,type:T(a.creditRating)},{default:t(()=>[r(g(a.creditRating),1)]),_:2},1032,["type"])):(V(),R("span",Y,"-"))]),_:1}),e(m,{prop:"active",label:"状态",width:"80",align:"center"},{default:t(({row:a})=>[e(A,{type:a.active?"success":"info"},{default:t(()=>[r(g(a.active?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),e(m,{label:"操作",width:"200",fixed:"right"},{default:t(({row:a})=>[e(c,{size:"small",onClick:D=>B(a)},{default:t(()=>[...l[19]||(l[19]=[r("编辑",-1)])]),_:1},8,["onClick"]),e(c,{size:"small",type:a.active?"warning":"success",onClick:D=>P(a)},{default:t(()=>[r(g(a.active?"禁用":"启用"),1)]),_:2},1032,["type","onClick"]),e(c,{size:"small",type:"danger",onClick:D=>h(a)},{default:t(()=>[...l[20]||(l[20]=[r("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[G,k.value]])]),_:1}),e(q,{modelValue:v.value,"onUpdate:modelValue":l[16]||(l[16]=a=>v.value=a),title:b.value?"编辑供应商":"新增供应商",width:"700px"},{footer:t(()=>[e(c,{onClick:l[15]||(l[15]=a=>v.value=!1)},{default:t(()=>[...l[24]||(l[24]=[r("取消",-1)])]),_:1}),e(c,{type:"primary",onClick:M,loading:C.value},{default:t(()=>[r(g(b.value?"更新":"创建"),1)]),_:1},8,["loading"])]),default:t(()=>[e(j,{model:o.value,"label-width":"120px"},{default:t(()=>[e(x,{"content-position":"left"},{default:t(()=>[...l[21]||(l[21]=[r("基本信息",-1)])]),_:1}),e(d,{label:"供应商名称",required:""},{default:t(()=>[e(s,{modelValue:o.value.name,"onUpdate:modelValue":l[1]||(l[1]=a=>o.value.name=a),placeholder:"请输入供应商名称"},null,8,["modelValue"])]),_:1}),e(d,{label:"联系人"},{default:t(()=>[e(s,{modelValue:o.value.contactPerson,"onUpdate:modelValue":l[2]||(l[2]=a=>o.value.contactPerson=a),placeholder:"请输入联系人"},null,8,["modelValue"])]),_:1}),e(d,{label:"联系电话"},{default:t(()=>[e(s,{modelValue:o.value.phone,"onUpdate:modelValue":l[3]||(l[3]=a=>o.value.phone=a),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),e(d,{label:"联系地址"},{default:t(()=>[e(s,{modelValue:o.value.address,"onUpdate:modelValue":l[4]||(l[4]=a=>o.value.address=a),placeholder:"请输入联系地址"},null,8,["modelValue"])]),_:1}),e(d,{label:"电子邮箱"},{default:t(()=>[e(s,{modelValue:o.value.email,"onUpdate:modelValue":l[5]||(l[5]=a=>o.value.email=a),placeholder:"请输入电子邮箱"},null,8,["modelValue"])]),_:1}),e(x,{"content-position":"left"},{default:t(()=>[...l[22]||(l[22]=[r("开票信息",-1)])]),_:1}),e(d,{label:"公司名称"},{default:t(()=>[e(s,{modelValue:o.value.companyName,"onUpdate:modelValue":l[6]||(l[6]=a=>o.value.companyName=a),placeholder:"用于开票的公司名称"},null,8,["modelValue"])]),_:1}),e(d,{label:"税号"},{default:t(()=>[e(s,{modelValue:o.value.taxNumber,"onUpdate:modelValue":l[7]||(l[7]=a=>o.value.taxNumber=a),placeholder:"纳税人识别号"},null,8,["modelValue"])]),_:1}),e(d,{label:"公司地址"},{default:t(()=>[e(s,{modelValue:o.value.companyAddress,"onUpdate:modelValue":l[8]||(l[8]=a=>o.value.companyAddress=a),placeholder:"用于开票的公司地址"},null,8,["modelValue"])]),_:1}),e(d,{label:"开户银行"},{default:t(()=>[e(s,{modelValue:o.value.bankName,"onUpdate:modelValue":l[9]||(l[9]=a=>o.value.bankName=a),placeholder:"开户银行名称"},null,8,["modelValue"])]),_:1}),e(d,{label:"银行账号"},{default:t(()=>[e(s,{modelValue:o.value.bankAccount,"onUpdate:modelValue":l[10]||(l[10]=a=>o.value.bankAccount=a),placeholder:"银行账号"},null,8,["modelValue"])]),_:1}),e(x,{"content-position":"left"},{default:t(()=>[...l[23]||(l[23]=[r("业务信息",-1)])]),_:1}),e(d,{label:"信用等级"},{default:t(()=>[e(U,{modelValue:o.value.creditRating,"onUpdate:modelValue":l[11]||(l[11]=a=>o.value.creditRating=a),placeholder:"请选择信用等级"},{default:t(()=>[e(p,{label:"A (优秀)",value:"A"}),e(p,{label:"B (良好)",value:"B"}),e(p,{label:"C (一般)",value:"C"}),e(p,{label:"D (较差)",value:"D"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"结算方式"},{default:t(()=>[e(U,{modelValue:o.value.paymentMethod,"onUpdate:modelValue":l[12]||(l[12]=a=>o.value.paymentMethod=a),placeholder:"请选择结算方式"},{default:t(()=>[e(p,{label:"现金",value:"CASH"}),e(p,{label:"转账",value:"TRANSFER"}),e(p,{label:"支票",value:"CHECK"}),e(p,{label:"赊账",value:"CREDIT"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"账期（天）"},{default:t(()=>[e(H,{modelValue:o.value.paymentTermDays,"onUpdate:modelValue":l[13]||(l[13]=a=>o.value.paymentTermDays=a),min:0,max:365},null,8,["modelValue"])]),_:1}),e(d,{label:"备注"},{default:t(()=>[e(s,{modelValue:o.value.remarks,"onUpdate:modelValue":l[14]||(l[14]=a=>o.value.remarks=a),type:"textarea",rows:3,placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},ae=K(Z,[["__scopeId","data-v-d7e4c03d"]]);export{ae as default};
