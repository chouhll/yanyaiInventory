import{_ as f,d as i,e as t,f as m,s as h,Q as b,F as v,B as A,t as e,A as c,R as g,j as r}from"./index-BTzqXMTB.js";const y={name:"FinancialReports",data(){return{activeTab:"balance",tabs:[{id:"balance",name:"资产负债表"},{id:"income",name:"利润表"},{id:"cashflow",name:"现金流量表"}],startDate:"",endDate:"",balanceSheet:null,incomeStatement:null,cashFlow:null,loading:!1,error:null}},mounted(){this.setDateRange("thisMonth"),this.loadReports()},methods:{setDateRange(o){const s=new Date;let u,d;switch(o){case"today":u=d=s;break;case"thisWeek":u=new Date(s),u.setDate(s.getDate()-s.getDay()),d=s;break;case"thisMonth":u=new Date(s.getFullYear(),s.getMonth(),1),d=s;break;case"thisYear":u=new Date(s.getFullYear(),0,1),d=s;break;default:u=new Date(s.getFullYear(),s.getMonth(),1),d=s}this.startDate=this.formatDate(u),this.endDate=this.formatDate(d)},formatDate(o){const s=o.getFullYear(),u=String(o.getMonth()+1).padStart(2,"0"),d=String(o.getDate()).padStart(2,"0");return`${s}-${u}-${d}`},async loadReports(){this.loading=!0,this.error=null;try{const[o,s,u]=await Promise.all([g.get(`http://localhost:8080/api/statistics/balance-sheet?asOfDate=${this.endDate}`),g.get(`http://localhost:8080/api/statistics/income-statement?startDate=${this.startDate}&endDate=${this.endDate}`),g.get(`http://localhost:8080/api/statistics/cash-flow?startDate=${this.startDate}&endDate=${this.endDate}`)]);this.balanceSheet=o.data,this.incomeStatement=s.data,this.cashFlow=u.data}catch(o){console.error("加载财务报表失败:",o),this.error="加载财务报表失败，请稍后重试"}finally{this.loading=!1}},formatAmount(o){return o==null?"0.00":Number(o).toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2})},formatNumber(o){return o==null?"0.00":Number(o).toFixed(2)},formatPercent(o,s){return!s||s===0?"0.00":(o/s*100).toFixed(2)},getAmountClass(o){return o>0?"positive":o<0?"negative":""}}},D={class:"financial-reports"},F={class:"date-selector"},p={class:"tabs"},S=["onClick"],w={key:0,class:"report-section"},C={class:"report-date"},k={key:0,class:"financial-statement"},_={class:"statement-section"},R={class:"financial-table"},x={class:"amount"},P={class:"amount"},E={class:"amount"},M={class:"subtotal"},N={class:"amount"},q={class:"total"},L={class:"amount"},T={class:"statement-section"},I={class:"financial-table"},Y={class:"amount"},B={class:"amount"},V={class:"subtotal"},O={class:"amount"},z={class:"total"},U={class:"amount"},W={class:"statement-section"},j={class:"financial-table"},Q={class:"amount"},G={class:"total"},H={class:"amount"},J={key:0},K={key:1},X={key:1,class:"report-section"},Z={class:"report-date"},$={key:0,class:"financial-statement"},tt={class:"financial-table"},st={class:"amount"},nt={class:"amount negative"},et={class:"amount"},lt={class:"subtotal"},ot={class:"amount"},at={class:"amount"},it={class:"amount"},rt={class:"amount"},ut={class:"amount"},dt={class:"subtotal"},mt={class:"amount"},ct={class:"amount"},gt={class:"total"},ht={class:"amount profit"},bt={class:"amount profit"},ft={class:"summary-info"},vt={key:2,class:"report-section"},At={class:"report-date"},yt={key:0,class:"financial-statement"},Dt={class:"financial-table"},Ft={class:"amount positive"},pt={class:"amount negative"},St={class:"amount negative"},wt={class:"subtotal"},Ct={class:"amount"},kt={class:"amount"},_t={class:"subtotal"},Rt={class:"amount"},xt={class:"amount"},Pt={class:"amount"},Et={class:"subtotal"},Mt={class:"amount"},Nt={class:"total"},qt={class:"amount"},Lt={class:"total highlight"},Tt={class:"amount"},It={class:"health-indicators"},Yt={class:"indicator"},Bt={class:"value"},Vt={class:"indicator"},Ot={key:3,class:"loading"},zt={key:4,class:"error-message"};function Ut(o,s,u,d,n,l){return r(),i("div",D,[s[68]||(s[68]=t("h1",null,"财务报表",-1)),t("div",F,[s[7]||(s[7]=t("label",null,"报表日期: ",-1)),h(t("input",{type:"date","onUpdate:modelValue":s[0]||(s[0]=a=>n.startDate=a)},null,512),[[b,n.startDate]]),s[8]||(s[8]=t("span",null," 至 ",-1)),h(t("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=a=>n.endDate=a)},null,512),[[b,n.endDate]]),t("button",{onClick:s[2]||(s[2]=(...a)=>l.loadReports&&l.loadReports(...a)),class:"btn-primary"},"查询"),t("button",{onClick:s[3]||(s[3]=a=>l.setDateRange("today")),class:"btn-secondary"},"今天"),t("button",{onClick:s[4]||(s[4]=a=>l.setDateRange("thisWeek")),class:"btn-secondary"},"本周"),t("button",{onClick:s[5]||(s[5]=a=>l.setDateRange("thisMonth")),class:"btn-secondary"},"本月"),t("button",{onClick:s[6]||(s[6]=a=>l.setDateRange("thisYear")),class:"btn-secondary"},"本年")]),t("div",p,[(r(!0),i(v,null,A(n.tabs,a=>(r(),i("button",{key:a.id,class:c(["tab",{active:n.activeTab===a.id}]),onClick:Wt=>n.activeTab=a.id},e(a.name),11,S))),128))]),n.activeTab==="balance"?(r(),i("div",w,[s[28]||(s[28]=t("h2",null,"资产负债表 (Balance Sheet)",-1)),t("p",C,"截至日期: "+e(n.endDate),1),n.balanceSheet?(r(),i("div",k,[t("div",_,[s[16]||(s[16]=t("h3",{class:"section-title"},"资产 (Assets)",-1)),t("table",R,[s[15]||(s[15]=t("thead",null,[t("tr",null,[t("th",null,"科目"),t("th",{class:"amount"},"金额 (¥)")])],-1)),t("tbody",null,[s[14]||(s[14]=t("tr",null,[t("td",{class:"indent-1"},"流动资产"),t("td",{class:"amount"})],-1)),t("tr",null,[s[9]||(s[9]=t("td",{class:"indent-2"},"现金",-1)),t("td",x,e(l.formatAmount(n.balanceSheet.assets.currentAssets.cash)),1)]),t("tr",null,[s[10]||(s[10]=t("td",{class:"indent-2"},"应收账款",-1)),t("td",P,e(l.formatAmount(n.balanceSheet.assets.currentAssets.accountsReceivable)),1)]),t("tr",null,[s[11]||(s[11]=t("td",{class:"indent-2"},"库存商品",-1)),t("td",E,e(l.formatAmount(n.balanceSheet.assets.currentAssets.inventory)),1)]),t("tr",M,[s[12]||(s[12]=t("td",{class:"indent-1"},"流动资产合计",-1)),t("td",N,e(l.formatAmount(n.balanceSheet.assets.currentAssets.total)),1)]),t("tr",q,[s[13]||(s[13]=t("td",null,[t("strong",null,"资产总计")],-1)),t("td",L,[t("strong",null,e(l.formatAmount(n.balanceSheet.assets.totalAssets)),1)])])])])]),t("div",T,[s[23]||(s[23]=t("h3",{class:"section-title"},"负债 (Liabilities)",-1)),t("table",I,[s[22]||(s[22]=t("thead",null,[t("tr",null,[t("th",null,"科目"),t("th",{class:"amount"},"金额 (¥)")])],-1)),t("tbody",null,[s[21]||(s[21]=t("tr",null,[t("td",{class:"indent-1"},"流动负债"),t("td",{class:"amount"})],-1)),t("tr",null,[s[17]||(s[17]=t("td",{class:"indent-2"},"应付账款",-1)),t("td",Y,e(l.formatAmount(n.balanceSheet.liabilities.currentLiabilities.accountsPayable)),1)]),t("tr",null,[s[18]||(s[18]=t("td",{class:"indent-2"},"应交税费",-1)),t("td",B,e(l.formatAmount(n.balanceSheet.liabilities.currentLiabilities.taxPayable)),1)]),t("tr",V,[s[19]||(s[19]=t("td",{class:"indent-1"},"流动负债合计",-1)),t("td",O,e(l.formatAmount(n.balanceSheet.liabilities.currentLiabilities.total)),1)]),t("tr",z,[s[20]||(s[20]=t("td",null,[t("strong",null,"负债合计")],-1)),t("td",U,[t("strong",null,e(l.formatAmount(n.balanceSheet.liabilities.totalLiabilities)),1)])])])])]),t("div",W,[s[27]||(s[27]=t("h3",{class:"section-title"},"所有者权益 (Equity)",-1)),t("table",j,[s[26]||(s[26]=t("thead",null,[t("tr",null,[t("th",null,"科目"),t("th",{class:"amount"},"金额 (¥)")])],-1)),t("tbody",null,[t("tr",null,[s[24]||(s[24]=t("td",{class:"indent-1"},"留存收益",-1)),t("td",Q,e(l.formatAmount(n.balanceSheet.equity.retainedEarnings)),1)]),t("tr",G,[s[25]||(s[25]=t("td",null,[t("strong",null,"所有者权益合计")],-1)),t("td",H,[t("strong",null,e(l.formatAmount(n.balanceSheet.equity.totalEquity)),1)])])])])]),t("div",{class:c(["balance-check",{valid:n.balanceSheet.balanceCheck}])},[n.balanceSheet.balanceCheck?(r(),i("span",J,"✓ 资产负债表平衡")):(r(),i("span",K,"⚠ 资产负债表不平衡"))],2)])):m("",!0)])):m("",!0),n.activeTab==="income"?(r(),i("div",X,[s[45]||(s[45]=t("h2",null,"利润表 (Income Statement)",-1)),t("p",Z,"期间: "+e(n.startDate)+" 至 "+e(n.endDate),1),n.incomeStatement?(r(),i("div",$,[t("table",tt,[s[44]||(s[44]=t("thead",null,[t("tr",null,[t("th",null,"项目"),t("th",{class:"amount"},"金额 (¥)"),t("th",{class:"amount"},"比率 (%)")])],-1)),t("tbody",null,[s[41]||(s[41]=t("tr",{class:"section-header"},[t("td",{colspan:"3"},[t("strong",null,"一、营业收入")])],-1)),t("tr",null,[s[29]||(s[29]=t("td",{class:"indent-1"},"营业收入",-1)),t("td",st,e(l.formatAmount(n.incomeStatement.operatingRevenue)),1),s[30]||(s[30]=t("td",{class:"amount"},"100.00",-1))]),s[42]||(s[42]=t("tr",{class:"section-header"},[t("td",{colspan:"3"},[t("strong",null,"二、营业成本")])],-1)),t("tr",null,[s[31]||(s[31]=t("td",{class:"indent-1"},"营业成本",-1)),t("td",nt,e(l.formatAmount(n.incomeStatement.operatingCost)),1),t("td",et,e(l.formatPercent(n.incomeStatement.operatingCost,n.incomeStatement.operatingRevenue)),1)]),t("tr",lt,[s[32]||(s[32]=t("td",null,[t("strong",null,"三、毛利润")],-1)),t("td",ot,[t("strong",null,e(l.formatAmount(n.incomeStatement.grossProfit)),1)]),t("td",at,[t("strong",null,e(l.formatNumber(n.incomeStatement.grossMargin)),1)])]),s[43]||(s[43]=t("tr",{class:"section-header"},[t("td",{colspan:"3"},[t("strong",null,"四、期间费用")])],-1)),t("tr",null,[s[33]||(s[33]=t("td",{class:"indent-1"},"销售费用",-1)),t("td",it,e(l.formatAmount(n.incomeStatement.operatingExpenses.salesExpenses)),1),s[34]||(s[34]=t("td",{class:"amount"},"-",-1))]),t("tr",null,[s[35]||(s[35]=t("td",{class:"indent-1"},"管理费用",-1)),t("td",rt,e(l.formatAmount(n.incomeStatement.operatingExpenses.adminExpenses)),1),s[36]||(s[36]=t("td",{class:"amount"},"-",-1))]),t("tr",null,[s[37]||(s[37]=t("td",{class:"indent-1"},"财务费用",-1)),t("td",ut,e(l.formatAmount(n.incomeStatement.operatingExpenses.financialExpenses)),1),s[38]||(s[38]=t("td",{class:"amount"},"-",-1))]),t("tr",dt,[s[39]||(s[39]=t("td",null,[t("strong",null,"五、营业利润")],-1)),t("td",mt,[t("strong",null,e(l.formatAmount(n.incomeStatement.operatingProfit)),1)]),t("td",ct,[t("strong",null,e(l.formatPercent(n.incomeStatement.operatingProfit,n.incomeStatement.operatingRevenue)),1)])]),t("tr",gt,[s[40]||(s[40]=t("td",null,[t("strong",null,"六、净利润")],-1)),t("td",ht,[t("strong",null,e(l.formatAmount(n.incomeStatement.netProfit)),1)]),t("td",bt,[t("strong",null,e(l.formatNumber(n.incomeStatement.netMargin)),1)])])])]),t("div",ft,[t("p",null,"期间订单数量: "+e(n.incomeStatement.orderCount)+" 笔",1)])])):m("",!0)])):m("",!0),n.activeTab==="cashflow"?(r(),i("div",vt,[s[66]||(s[66]=t("h2",null,"现金流量表 (Cash Flow Statement)",-1)),t("p",At,"期间: "+e(n.startDate)+" 至 "+e(n.endDate),1),n.cashFlow?(r(),i("div",yt,[t("table",Dt,[s[62]||(s[62]=t("thead",null,[t("tr",null,[t("th",null,"项目"),t("th",{class:"amount"},"金额 (¥)")])],-1)),t("tbody",null,[s[59]||(s[59]=t("tr",{class:"section-header"},[t("td",{colspan:"2"},[t("strong",null,"一、经营活动产生的现金流量")])],-1)),t("tr",null,[s[46]||(s[46]=t("td",{class:"indent-1"},"销售商品收到的现金",-1)),t("td",Ft,e(l.formatAmount(n.cashFlow.operatingActivities.cashFromSales)),1)]),t("tr",null,[s[47]||(s[47]=t("td",{class:"indent-1"},"购买商品支付的现金",-1)),t("td",pt,e(l.formatAmount(n.cashFlow.operatingActivities.cashForPurchases)),1)]),t("tr",null,[s[48]||(s[48]=t("td",{class:"indent-1"},"支付的各项税费",-1)),t("td",St,e(l.formatAmount(n.cashFlow.operatingActivities.taxPayments)),1)]),t("tr",wt,[s[49]||(s[49]=t("td",null,[t("strong",null,"经营活动现金流量净额")],-1)),t("td",{class:c(["amount",l.getAmountClass(n.cashFlow.operatingActivities.netCashFlow)])},[t("strong",null,e(l.formatAmount(n.cashFlow.operatingActivities.netCashFlow)),1)],2)]),s[60]||(s[60]=t("tr",{class:"section-header"},[t("td",{colspan:"2"},[t("strong",null,"二、投资活动产生的现金流量")])],-1)),t("tr",null,[s[50]||(s[50]=t("td",{class:"indent-1"},"购建固定资产支付的现金",-1)),t("td",Ct,e(l.formatAmount(n.cashFlow.investingActivities.purchaseOfAssets)),1)]),t("tr",null,[s[51]||(s[51]=t("td",{class:"indent-1"},"处置固定资产收到的现金",-1)),t("td",kt,e(l.formatAmount(n.cashFlow.investingActivities.saleOfAssets)),1)]),t("tr",_t,[s[52]||(s[52]=t("td",null,[t("strong",null,"投资活动现金流量净额")],-1)),t("td",Rt,[t("strong",null,e(l.formatAmount(n.cashFlow.investingActivities.netCashFlow)),1)])]),s[61]||(s[61]=t("tr",{class:"section-header"},[t("td",{colspan:"2"},[t("strong",null,"三、筹资活动产生的现金流量")])],-1)),t("tr",null,[s[53]||(s[53]=t("td",{class:"indent-1"},"取得借款收到的现金",-1)),t("td",xt,e(l.formatAmount(n.cashFlow.financingActivities.borrowings)),1)]),t("tr",null,[s[54]||(s[54]=t("td",{class:"indent-1"},"偿还债务支付的现金",-1)),t("td",Pt,e(l.formatAmount(n.cashFlow.financingActivities.repayments)),1)]),t("tr",Et,[s[55]||(s[55]=t("td",null,[t("strong",null,"筹资活动现金流量净额")],-1)),t("td",Mt,[t("strong",null,e(l.formatAmount(n.cashFlow.financingActivities.netCashFlow)),1)])]),t("tr",Nt,[s[56]||(s[56]=t("td",null,[t("strong",null,"四、现金净增加额")],-1)),t("td",{class:c(["amount",l.getAmountClass(n.cashFlow.netCashChange)])},[t("strong",null,e(l.formatAmount(n.cashFlow.netCashChange)),1)],2)]),t("tr",null,[s[57]||(s[57]=t("td",{class:"indent-1"},"期初现金余额",-1)),t("td",qt,e(l.formatAmount(n.cashFlow.beginningCash)),1)]),t("tr",Lt,[s[58]||(s[58]=t("td",null,[t("strong",null,"五、期末现金余额")],-1)),t("td",Tt,[t("strong",null,e(l.formatAmount(n.cashFlow.endingCash)),1)])])])]),t("div",It,[s[65]||(s[65]=t("h4",null,"现金流健康度指标",-1)),t("div",Yt,[s[63]||(s[63]=t("span",null,"经营活动现金比率:",-1)),t("span",Bt,e(l.formatNumber(n.cashFlow.healthIndicators.operatingCashRatio))+"%",1)]),t("div",Vt,[s[64]||(s[64]=t("span",null,"现金流充足性:",-1)),t("span",{class:c(["value",{positive:n.cashFlow.healthIndicators.cashFlowAdequacy,negative:!n.cashFlow.healthIndicators.cashFlowAdequacy}])},e(n.cashFlow.healthIndicators.cashFlowAdequacy?"充足":"不足"),3)])])])):m("",!0)])):m("",!0),n.loading?(r(),i("div",Ot,[...s[67]||(s[67]=[t("p",null,"正在加载财务报表...",-1)])])):m("",!0),n.error?(r(),i("div",zt,[t("p",null,e(n.error),1)])):m("",!0)])}const Qt=f(y,[["render",Ut],["__scopeId","data-v-333567c9"]]);export{Qt as default};
