import{_ as H,r as b,K as w,o as h,d as y,e,h as s,w as l,k as z,N as B,i as u,O as N,E as S,j as v,m as i,t as n,f as p,x as M}from"./index-BFh0Y9zA.js";const F={class:"inventory-alerts"},$={class:"page-header"},j={class:"stat-content"},q={class:"stat-info"},J={class:"stat-value"},Q={class:"stat-content"},Y={class:"stat-info"},Z={class:"stat-value"},tt={class:"stat-content"},et={class:"stat-info"},st={class:"stat-value"},lt={class:"stat-content"},at={class:"stat-info"},ot={class:"stat-value"},nt={class:"stat-content"},it={class:"stat-info"},dt={class:"stat-value"},rt={class:"stat-content"},ut={class:"stat-info"},ct={class:"stat-value"},_t={class:"alert-details"},vt={key:0},pt={key:1},ft={key:2},yt={key:3},Ot={key:4},mt={class:"alert-message"},bt={__name:"InventoryAlerts",setup(St){const k=b([]),r=b({lowStock:0,outOfStock:0,overStock:0,expiringSoon:0,expired:0,slowMoving:0,total:0}),O=b(""),m=b(""),K=w(()=>{let o=k.value;return O.value&&(o=o.filter(t=>t.alertType===O.value)),m.value&&(o=o.filter(t=>t.severity===m.value)),o}),T=async()=>{try{const o=await N.getAll();o.success&&(k.value=o.data)}catch(o){S.error("Âä†ËΩΩÈ¢ÑË≠¶Êï∞ÊçÆÂ§±Ë¥•"),console.error(o)}},E=async()=>{try{const o=await N.getStatistics();o.success&&(r.value=o.data)}catch(o){console.error("Âä†ËΩΩÁªüËÆ°Êï∞ÊçÆÂ§±Ë¥•",o)}},L=async()=>{await Promise.all([T(),E()]),S.success("È¢ÑË≠¶Êï∞ÊçÆÂ∑≤Âà∑Êñ∞")},I=()=>{},R=o=>({HIGH:"danger",MEDIUM:"warning",LOW:"info"})[o]||"info",U=o=>({HIGH:"È´òÂç±",MEDIUM:"‰∏≠Á≠â",LOW:"‰ΩéÁ∫ß"})[o]||o,A=o=>({LOW_STOCK:"‰ΩéÂ∫ìÂ≠ò",OUT_OF_STOCK:"Áº∫Ë¥ß",OVER_STOCK:"Ë∂ÖÂ∫ìÂ≠ò",EXPIRING_SOON:"Âç≥Â∞ÜËøáÊúü",EXPIRED:"Â∑≤ËøáÊúü",SLOW_MOVING:"ÊªûÈîÄÂìÅ"})[o]||o,D=o=>({OUT_OF_STOCK:"danger",LOW_STOCK:"warning",EXPIRED:"danger",EXPIRING_SOON:"warning",OVER_STOCK:"info",SLOW_MOVING:"info"})[o]||"info",W=o=>{S.info("Ë∑≥ËΩ¨Âà∞ÈááË¥≠È°µÈù¢ËøõË°åË°•Ë¥ß")},G=o=>{S.info("Â§ÑÁêÜËøáÊúüÊâπÊ¨°")};return h(()=>{T(),E()}),(o,t)=>{const g=u("el-button"),c=u("el-card"),_=u("el-col"),C=u("el-row"),d=u("el-option"),x=u("el-select"),f=u("el-table-column"),V=u("el-tag"),P=u("el-table");return v(),y("div",F,[e("div",$,[t[3]||(t[3]=e("h2",null,"üìä Â∫ìÂ≠òÈ¢ÑË≠¶",-1)),s(g,{type:"primary",onClick:L,icon:z(B)},{default:l(()=>[...t[2]||(t[2]=[i("Âà∑Êñ∞",-1)])]),_:1},8,["icon"])]),s(C,{gutter:20,class:"stats-cards"},{default:l(()=>[s(_,{span:4},{default:l(()=>[s(c,{class:"stat-card high-severity"},{default:l(()=>[e("div",j,[t[5]||(t[5]=e("div",{class:"stat-icon"},"‚ö†Ô∏è",-1)),e("div",q,[e("div",J,n(r.value.outOfStock+r.value.expired),1),t[4]||(t[4]=e("div",{class:"stat-label"},"È´òÂç±È¢ÑË≠¶",-1))])])]),_:1})]),_:1}),s(_,{span:4},{default:l(()=>[s(c,{class:"stat-card medium-severity"},{default:l(()=>[e("div",Q,[t[7]||(t[7]=e("div",{class:"stat-icon"},"‚ö°",-1)),e("div",Y,[e("div",Z,n(r.value.lowStock+r.value.expiringSoon),1),t[6]||(t[6]=e("div",{class:"stat-label"},"‰∏≠Á≠âÈ¢ÑË≠¶",-1))])])]),_:1})]),_:1}),s(_,{span:4},{default:l(()=>[s(c,{class:"stat-card low-severity"},{default:l(()=>[e("div",tt,[t[9]||(t[9]=e("div",{class:"stat-icon"},"‚ÑπÔ∏è",-1)),e("div",et,[e("div",st,n(r.value.overStock+r.value.slowMoving),1),t[8]||(t[8]=e("div",{class:"stat-label"},"‰ΩéÁ∫ßÈ¢ÑË≠¶",-1))])])]),_:1})]),_:1}),s(_,{span:4},{default:l(()=>[s(c,{class:"stat-card"},{default:l(()=>[e("div",lt,[t[11]||(t[11]=e("div",{class:"stat-icon"},"üì¶",-1)),e("div",at,[e("div",ot,n(r.value.lowStock),1),t[10]||(t[10]=e("div",{class:"stat-label"},"‰ΩéÂ∫ìÂ≠ò",-1))])])]),_:1})]),_:1}),s(_,{span:4},{default:l(()=>[s(c,{class:"stat-card"},{default:l(()=>[e("div",nt,[t[13]||(t[13]=e("div",{class:"stat-icon"},"üö´",-1)),e("div",it,[e("div",dt,n(r.value.outOfStock),1),t[12]||(t[12]=e("div",{class:"stat-label"},"Áº∫Ë¥ß",-1))])])]),_:1})]),_:1}),s(_,{span:4},{default:l(()=>[s(c,{class:"stat-card"},{default:l(()=>[e("div",rt,[t[15]||(t[15]=e("div",{class:"stat-icon"},"‚è∞",-1)),e("div",ut,[e("div",ct,n(r.value.expiringSoon),1),t[14]||(t[14]=e("div",{class:"stat-label"},"Âç≥Â∞ÜËøáÊúü",-1))])])]),_:1})]),_:1})]),_:1}),s(c,{class:"filter-card"},{default:l(()=>[s(C,{gutter:20},{default:l(()=>[s(_,{span:6},{default:l(()=>[s(x,{modelValue:O.value,"onUpdate:modelValue":t[0]||(t[0]=a=>O.value=a),placeholder:"È¢ÑË≠¶Á±ªÂûã",clearable:"",onChange:I},{default:l(()=>[s(d,{label:"ÂÖ®ÈÉ®",value:""}),s(d,{label:"‰ΩéÂ∫ìÂ≠ò",value:"LOW_STOCK"}),s(d,{label:"Áº∫Ë¥ß",value:"OUT_OF_STOCK"}),s(d,{label:"Ë∂ÖÂ∫ìÂ≠ò",value:"OVER_STOCK"}),s(d,{label:"Âç≥Â∞ÜËøáÊúü",value:"EXPIRING_SOON"}),s(d,{label:"Â∑≤ËøáÊúü",value:"EXPIRED"}),s(d,{label:"ÊªûÈîÄÂìÅ",value:"SLOW_MOVING"})]),_:1},8,["modelValue"])]),_:1}),s(_,{span:6},{default:l(()=>[s(x,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=a=>m.value=a),placeholder:"‰∏•ÈáçÁ®ãÂ∫¶",clearable:"",onChange:I},{default:l(()=>[s(d,{label:"ÂÖ®ÈÉ®",value:""}),s(d,{label:"È´òÂç±",value:"HIGH"}),s(d,{label:"‰∏≠Á≠â",value:"MEDIUM"}),s(d,{label:"‰ΩéÁ∫ß",value:"LOW"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(c,{class:"alerts-table"},{default:l(()=>[s(P,{data:K.value,style:{width:"100%"},stripe:""},{default:l(()=>[s(f,{type:"expand"},{default:l(({row:a})=>[e("div",_t,[e("p",null,[t[16]||(t[16]=e("strong",null,"‰∫ßÂìÅÁºñÁ†ÅÔºö",-1)),i(n(a.product.code),1)]),e("p",null,[t[17]||(t[17]=e("strong",null,"ÂΩìÂâçÂ∫ìÂ≠òÔºö",-1)),i(n(a.currentStock),1)]),a.safetyStock?(v(),y("p",vt,[t[18]||(t[18]=e("strong",null,"ÂÆâÂÖ®Â∫ìÂ≠òÔºö",-1)),i(n(a.safetyStock),1)])):p("",!0),a.maxStock?(v(),y("p",pt,[t[19]||(t[19]=e("strong",null,"ÊúÄÂ§ßÂ∫ìÂ≠òÔºö",-1)),i(n(a.maxStock),1)])):p("",!0),a.batch?(v(),y("p",ft,[t[20]||(t[20]=e("strong",null,"ÊâπÊ¨°Âè∑Ôºö",-1)),i(n(a.batch.batchNumber),1)])):p("",!0),a.expirationDate?(v(),y("p",yt,[t[21]||(t[21]=e("strong",null,"Âà∞ÊúüÊó•ÊúüÔºö",-1)),i(n(a.expirationDate),1)])):p("",!0),a.daysUntilExpiration?(v(),y("p",Ot,[t[22]||(t[22]=e("strong",null,"Ââ©‰ΩôÂ§©Êï∞Ôºö",-1)),i(n(a.daysUntilExpiration)+"Â§©",1)])):p("",!0)])]),_:1}),s(f,{label:"‰∏•ÈáçÁ®ãÂ∫¶",width:"100"},{default:l(({row:a})=>[s(V,{type:R(a.severity),size:"small"},{default:l(()=>[i(n(U(a.severity)),1)]),_:2},1032,["type"])]),_:1}),s(f,{label:"È¢ÑË≠¶Á±ªÂûã",width:"120"},{default:l(({row:a})=>[s(V,{type:D(a.alertType),size:"small"},{default:l(()=>[i(n(A(a.alertType)),1)]),_:2},1032,["type"])]),_:1}),s(f,{prop:"product.name",label:"‰∫ßÂìÅÂêçÁß∞",width:"200"}),s(f,{label:"È¢ÑË≠¶‰ø°ÊÅØ","min-width":"300"},{default:l(({row:a})=>[e("div",mt,n(a.message),1)]),_:1}),s(f,{label:"Êìç‰Ωú",width:"150"},{default:l(({row:a})=>[a.alertType==="LOW_STOCK"||a.alertType==="OUT_OF_STOCK"?(v(),M(g,{key:0,type:"primary",size:"small",onClick:X=>W(a)},{default:l(()=>[...t[23]||(t[23]=[i(" Ë°•Ë¥ß ",-1)])]),_:1},8,["onClick"])):p("",!0),a.alertType==="EXPIRED"?(v(),M(g,{key:1,type:"danger",size:"small",onClick:X=>G(a)},{default:l(()=>[...t[24]||(t[24]=[i(" Â§ÑÁêÜ ",-1)])]),_:1},8,["onClick"])):p("",!0)]),_:1})]),_:1},8,["data"])]),_:1})])}}},kt=H(bt,[["__scopeId","data-v-8a875f95"]]);export{kt as default};
